{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport styles from './art.module.scss';\nimport Link from 'next/link'; // import { ConnectedPager } from '../pager/pager'\n\nimport Layout from '../../components/layout';\nimport { fetchArtworkPagedData, fetchArtworkMediaTypes } from '../../lib/api';\nimport Card from 'react-bootstrap/Card';\nimport Pager from '../../components/pager/pager';\nimport Head from 'next/head';\nexport var __N_SSP = true;\nexport default function ArtListPage(_ref) {\n  var artData = _ref.artData,\n      menuItems = _ref.menuItems;\n  var pageSize = process.env.NEXT_PUBLIC_PAGESIZE;\n\n  var _useState = useState(artData),\n      artWork = _useState[0],\n      setArt = _useState[1];\n\n  var _useState2 = useState(1),\n      pageNum = _useState2[0],\n      setPage = _useState2[1];\n\n  var _useState3 = useState('all'),\n      mediaType = _useState3[0],\n      setMedia = _useState3[1];\n\n  var _useState4 = useState(menuItems),\n      mediaItems = _useState4[0],\n      setMediaItems = _useState4[1];\n\n  function goToPage(val) {\n    setPage(val);\n    getPagedArtwork(val);\n  }\n\n  var nextPage = function nextPage() {\n    var page = pageNum + 1;\n    setPage(page);\n    getPagedArtwork(page);\n  };\n\n  var prevPage = function prevPage() {\n    var page = pageNum - 1;\n    console.log(\"Prev\", page);\n    setPage(page);\n    getPagedArtwork(page);\n  };\n\n  var artLoaded = artData.results.length > 0;\n  console.log(\"In return:\", process.env.NEXT_PUBLIC_PAGESIZE);\n\n  var getPagedArtwork = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(page) {\n      var url, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              url = \"\".concat(process.env.NEXT_PUBLIC_REACT_APP_API_SERVER, \"/api/artwork/media/?media=\").concat(mediaType, \"&page=\").concat(page, \"&page_size=\").concat(pageSize);\n              _context.next = 3;\n              return fetchArtworkPagedData(url);\n\n            case 3:\n              response = _context.sent;\n              setArt(response);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getPagedArtwork(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var getMenuItems = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetchArtworkMediaTypes();\n\n            case 2:\n              data = _context2.sent;\n              setMediaItems(data);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getMenuItems() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getArtworkByMedia = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n      var url, response;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setPage(1);\n              setMedia(e.target.value);\n              url = \"\".concat(process.env.NEXT_PUBLIC_REACT_APP_API_SERVER, \"/api/artwork/media/?media=\").concat(e.target.value, \"&page=1&page_size=\").concat(pageSize);\n              _context3.next = 5;\n              return fetchArtworkPagedData(url);\n\n            case 5:\n              response = _context3.sent;\n              setArt(response);\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function getArtworkByMedia(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var art;\n\n  if (artLoaded) {\n    art = /*#__PURE__*/_jsxs(Layout, {\n      children: [/*#__PURE__*/_jsxs(Head, {\n        children: [/*#__PURE__*/_jsx(\"title\", {\n          children: \"Brad Rice's art\"\n        }), /*#__PURE__*/_jsx(\"meta\", {\n          property: \"og:title\",\n          content: \"Brad Rice's art\"\n        }, \"title\")]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.artHolder,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-sm-12 col-md-4\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"form-conntrol filter-control\",\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                htmlFor: \"media\",\n                className: \"form-label\",\n                children: \"Filter by Media\"\n              }), /*#__PURE__*/_jsxs(\"select\", {\n                className: \"form-select\",\n                id: \"meida-select\",\n                name: \"media\",\n                onChange: getArtworkByMedia,\n                children: [/*#__PURE__*/_jsx(\"option\", {\n                  value: \"all\",\n                  children: \"All\"\n                }), mediaItems.map(function (item, v) {\n                  return /*#__PURE__*/_jsx(\"option\", {\n                    value: item.key,\n                    children: item.value\n                  });\n                })]\n              })]\n            })\n          })\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.artHolder,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: (artWork.results || []).map(function (item) {\n            return /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-sm-4 \".concat(styles.cardCol),\n              children: /*#__PURE__*/_jsxs(Card, {\n                className: styles.cardItem,\n                children: [/*#__PURE__*/_jsx(Link, {\n                  href: \"/art/\".concat(item.id),\n                  children: /*#__PURE__*/_jsx(Card.Img, {\n                    className: styles.cardImage,\n                    src: item.artimage.gallery_medium,\n                    alt: item.title\n                  })\n                }), /*#__PURE__*/_jsxs(Card.Body, {\n                  children: [/*#__PURE__*/_jsx(Card.Title, {\n                    children: item.title\n                  }), /*#__PURE__*/_jsx(Card.Text, {\n                    className: styles.cardText,\n                    children: item.sold ? /*#__PURE__*/_jsx(\"span\", {\n                      className: styles.sold,\n                      children: \"Sold\"\n                    }) : \"\"\n                  }), /*#__PURE__*/_jsx(Link, {\n                    href: \"/art/\".concat(item.id),\n                    children: \"Detail\"\n                  })]\n                })]\n              })\n            }, item.id);\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-sm-12\",\n          children: /*#__PURE__*/_jsx(Pager, {\n            artData: artWork,\n            pageTo: goToPage,\n            goNext: nextPage,\n            goPrev: prevPage,\n            pageNum: pageNum,\n            pageCount: artWork.count\n          })\n        })]\n      })]\n    });\n  } else {\n    art = /*#__PURE__*/_jsx(\"div\", {\n      children: \"The server must be down currently. Please check back later.\"\n    });\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    children: art\n  });\n}","map":null,"metadata":{},"sourceType":"module"}